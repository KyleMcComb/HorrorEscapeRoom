<!DOCTYPE html>
<html>
<!--WHEN CHANGING SIZE (MID GAME) CLICK DOESN'T WORK
  is it important? is it necessary?
 -->
    <head>
        <title>Exit Room</title>
        <link rel="stylesheet" href="css/style.css" type="text/css" />
        <link rel="stylesheet" href="css/room.css" type ="text/css" />

        <style type="text/css">



        #exitButton {
          border:none;
          display: block;
          width: 24%;
          top: 47%;
          right: 36%;
          height: 48%;
          position: absolute;
          cursor: pointer;
          background: none;
        }

        #goldKey{
          width: 6%;
          top: 90%;
          right: 90%;
          height: 6%;
          background:url('img/Exit/goldKey.png') no-repeat;
          background-size:100%;
        }

        #blueKey{
          width: 6%;
          top: 90%;
          right: 2%;
          height: 6%;
          background:url('img/Exit/blueKey.png') no-repeat;
          background-size:100%;
        }

        #purpleKey{
          width: 6%;
          top: 2%;
          right: 45%;
          height: 6%;
          background:url('img/Exit/purpleKey.png') no-repeat;
          background-size:100%;
        }

        .key {
          border:none;
          display: block;
          position: absolute;
          cursor: pointer;
          background-size:100%;
        }




        </style>
        <script>
        function changeText(){
          var element = document.getElementById("change");
          element.innerHTML="EXIT ROOM";
        }

        var code;

        function displayCode(){
          var txt;
          var startTime = new Date();

          code = prompt("Enter the code to escape!: ");

          var endTime = new Date();
          var timeSpent = endTime-startTime;
          duration-=timeSpent;


          if(duration<=0){
            window.location.href = 'hallway.html';   //END SCREEN - YOU LOSE (time out)
          } else{
            if (code == null || code == "") {
              txt = "User cancelled the prompt.";
            } else if(code=="420"){
              window.location.href = 'endScreen.html';
            } else {
              txt = "<p>That code is incorrect</p>";
            }
          }
          document.getElementById("gameText").innerHTML = txt + ' ' + timeSpent;

          }

            var myTimer2;
            var timePassed=0;
            var myTimer;
            var duration =(10*1000);

            function startTimer(){
              myTimer = setInterval('countdown()',1000);
              timePassed+=1000;
              //myTimer2  = setTimeout('countdown()',5000);
            }

            function stopTimer(){
                clearInterval(myTimer2);
            }

            function countdown(){
                timePassed+=1000;
                duration-=1000;

                if(duration==5000){
                  document.getElementById('gameText').innerHTML='<p>5 seconds left</p>';

                }
                if(duration>=0){
                    document.getElementById('timer').innerHTML = duration;
                } else{
                    stopTimer();
                    document.getElementById('gameText').innerHTML='<p>Stop Game!</p>';
                }
            }

            function keyFound(keyType){
              window.open('img/Exit/goldKey.png');

              var x;
              switch(keyType){
                case 'gold':
                  x = document.getElementById("goldKey");
                  break;
                case 'blue':
                  x = document.getElementById("blueKey");
                  break;
                case 'purple':
                  x = document.getElementById("purpleKey");
                  break;
                default:
                  break;
              }
              x.style.display = "none";

            }
        </script>

    </head>
    <body onload="startTimer();">
      <div id="wrapper">
    <div id="head">
      <h1>Exit Room</h1>
    </div>
    <div class="row">
      <div id="col-left">
        <h2 id="change">Game Text Section</h2>

        <div id="gameText">
        </div>

        <p id="demo"></p>
        <p id="timer"></p>
      </div>
      <div id="col-right">
        <h2 id="roomName">Final Room</h2>

        <div id="imageDiv">
          <button id="exitButton" onclick="displayCode();"></button>
          <button class="key" id="goldKey" onclick="keyFound('gold');"></button>
          <button class="key" id="blueKey" onclick="keyFound('blue');"></button>
          <button class="key" id="purpleKey" onclick="keyFound('purple');"></button>
          <img id="img_ID" src="img/Exit/exitRoom.jpg" usemap="#map" border="0" width="100%" alt="" />
        </div>



      </div>

    </div>
  </div>

</body>
</html>
